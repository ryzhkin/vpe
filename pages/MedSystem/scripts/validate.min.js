$.prototype.validate=function(){var obj=$(this),submitBtn=obj.find("[type=submit]"),notValid=obj.find(".required:not(.valid)");obj[0].reset(),obj.find("*[required]").each(function(){switch(this.type){case"checkbox":this.addEventListener("change",checkValue,!1);break;case"email":this.addEventListener("blur",checkValue,!1),this.addEventListener("keyup",checkValue,!1);break;default:this.addEventListener("keyup",checkValue,!1)}}),obj.submit(function(event){if(event.preventDefault(),$(this).addClass("validate"),notValid=obj.find("[required]:not(.valid)"),0==notValid.length){var output={};obj.find("input, textarea, select").each(function(){"submit"==!$(this).attr("type")&&(output[$(this).attr("name")]=$(this).val())}),submitBtn.addClass("active"),$.ajax({type:"POST",url:obj.attr("action"),data:output,success:function(data){(data.status="OK")&&void 0!==data.redirect&&(window.location=data.redirect.url)},beforeSend:function(){},complete:function(){}})}else notValid.addClass("invalid"),$(obj.find(".required:not(.valid) input")[0]).focus()})},$.prototype.switchState=function(valid){var oldState="valid",newState="invalid";return valid&&(newState="valid",oldState="invalid"),$(this).removeClass(oldState).addClass(newState),newState};var validateEmail=function(email){var re=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return re.test(email)},checkValue=function(event){$(this).hasClass("number")&&(event.preventDefault(),this.value=this.value.replace(/[a-z]/gi,""));var value=this.value.trim(),submitBtn=$(this.form).find("[type=submit][switch]"),objRequired=$(this).closest(".required");switch(this.id){default:switch(this.type){case"email":objRequired.switchState(validateEmail(value)),$(this).switchState(validateEmail(value));break;case"checkbox":objRequired.switchState(this.checked),$(this).switchState(this.checked);break;case"tel":objRequired.switchState(12==value.length),$(this).switchState(12==value.length);break;default:objRequired.switchState(value.length>0),$(this).switchState(value.length>0)}}var notValid=$(this.form).find("[required]:not(.valid)");notValid.length>0&&0!==submitBtn.length?submitBtn.attr("disabled","disabled"):submitBtn.removeAttr("disabled")};